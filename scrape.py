import time
import csv
import requests
from bs4 import BeautifulSoup

def is_ascii(s):
    return all(ord(c) < 128 for c in s)

with open("vornamen_w.csv", mode="w", newline="") as file:
    csv_writer = csv.writer(file, delimiter=" ")

    for i in range(1, 1756):
        try:
            page = requests.get('http://www.firstname.de/Namenssuche/' + str(i) + '/0/alle/0/0/0/0/0/')

            soup = BeautifulSoup(page.text, "html.parser")
            girls = soup.find_all('a', {"class": "girl"})
            
            for girl in girls:
                if is_ascii(girl.text):
                    csv_writer.writerow([girl.text.strip()])
                else:
                    print("fuck")

            if i % 50 == 0:
                time.sleep(5)
            if i % 100 == 0:
                time.sleep(10)
            elif i % 200 == 0:
                time.sleep(10)
            elif i % 500 == 0:
                time.sleep(20)
            
            # print(format((i / 1756), '.4f'))
            print(str(i) + " von 1756 Seiten gekratzt")

            time.sleep(0.5)
        except:
            print("""          _____                    _____                    _____                    _____                    _____                    _____                    _____                    _____                    _____          
         /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \         
        /::\    \                /::\____\                /::\____\                /::\____\                /::\____\                /::\____\                /::\____\                /::\    \                /::\____\        
       /::::\    \              /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /::::\    \              /:::/    /        
      /::::::\    \            /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /::::::\    \            /:::/    /         
     /:::/\:::\    \          /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/\:::\    \          /:::/    /          
    /:::/__\:::\    \        /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/  \:::\    \        /:::/____/           
   /::::\   \:::\    \      /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    /               /:::/    \:::\    \      /::::\    \           
  /::::::\   \:::\    \    /:::/    /      _____    /:::/    /      _____    /:::/    /      _____    /:::/    /      _____    /:::/    /      _____    /:::/    /      _____    /:::/    / \:::\    \    /::::::\____\________  
 /:::/\:::\   \:::\    \  /:::/____/      /\    \  /:::/____/      /\    \  /:::/____/      /\    \  /:::/____/      /\    \  /:::/____/      /\    \  /:::/____/      /\    \  /:::/    /   \:::\    \  /:::/\:::::::::::\    \ 
/:::/  \:::\   \:::\____\|:::|    /      /::\____\|:::|    /      /::\____\|:::|    /      /::\____\|:::|    /      /::\____\|:::|    /      /::\____\|:::|    /      /::\____\/:::/____/     \:::\____\/:::/  |:::::::::::\____\
\::/    \:::\   \::/    /|:::|____\     /:::/    /|:::|____\     /:::/    /|:::|____\     /:::/    /|:::|____\     /:::/    /|:::|____\     /:::/    /|:::|____\     /:::/    /\:::\    \      \::/    /\::/   |::|~~~|~~~~~     
 \/____/ \:::\   \/____/  \:::\    \   /:::/    /  \:::\    \   /:::/    /  \:::\    \   /:::/    /  \:::\    \   /:::/    /  \:::\    \   /:::/    /  \:::\    \   /:::/    /  \:::\    \      \/____/  \/____|::|   |          
          \:::\    \       \:::\    \ /:::/    /    \:::\    \ /:::/    /    \:::\    \ /:::/    /    \:::\    \ /:::/    /    \:::\    \ /:::/    /    \:::\    \ /:::/    /    \:::\    \                    |::|   |          
           \:::\____\       \:::\    /:::/    /      \:::\    /:::/    /      \:::\    /:::/    /      \:::\    /:::/    /      \:::\    /:::/    /      \:::\    /:::/    /      \:::\    \                   |::|   |          
            \::/    /        \:::\__/:::/    /        \:::\__/:::/    /        \:::\__/:::/    /        \:::\__/:::/    /        \:::\__/:::/    /        \:::\__/:::/    /        \:::\    \                  |::|   |          
             \/____/          \::::::::/    /          \::::::::/    /          \::::::::/    /          \::::::::/    /          \::::::::/    /          \::::::::/    /          \:::\    \                 |::|   |          
                               \::::::/    /            \::::::/    /            \::::::/    /            \::::::/    /            \::::::/    /            \::::::/    /            \:::\    \                |::|   |          
                                \::::/    /              \::::/    /              \::::/    /              \::::/    /              \::::/    /              \::::/    /              \:::\____\               \::|   |          
                                 \::/____/                \::/____/                \::/____/                \::/____/                \::/____/                \::/____/                \::/    /                \:|   |          
                                  ~~                       ~~                       ~~                       ~~                       ~~                       ~~                       \/____/                  \|___|          
                                                                                                                                                                                                                                 

""")
            time.sleep(100)
